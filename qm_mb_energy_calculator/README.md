# Instructions for Database

## General:
The database functionality of the qm mb calculator is used to create a database containing energies of different configurations of fragments. This database can be accessed to create a training set, compare energies calculated by different methods, etc.

Before running any of the following commnads, make sure your psi4 development branch anaconda enviornment is activated. For instructions on creating and activating such an enviornment see potential_fitting/PSI4_SETUP.md

## Creating a database:
A database is created with database_initializer.py:

database_initializer.py creates a database containing specified configurations. The database created by database_initializer.py will not have any energies calculated. 
```
python database_initializer.py <settings file> <database name> <config files directory>
```
settings file: a file ending in .ini containing all the settings needed to initialize a database.

database name: the name of the file to store the database in. ".db" will be added to the end if the name does not already end in ".db".

config files directory: the path to a directory containing any number of files ending in ".xyz". All configurations in all files ending in ".xyz" are initialized into the database, files not ending in ".xyz" are ignored. If you wish to generate a training set from this database, there should be a ".opt.xyz" suffixed file in this directory containing the optimized geometry. Can be just a single .xzy file.

## Filling a database:
A database is filled with database_filler.py:

database_filler.py fills a database. This means it loops through all the configurations in the database and calculates any uncalculated energies.
```
python database_filler.py <settings file> <database name> <config files directory>
```
settings file: a file ending in .ini containing all the settings needed to fill a database.

database name: the name of the file the database is stored in. ".db" will be added to the end if the name does not already end in ".db".

config files directory: currently unused. Will probably be removed.

## Getting a training set from a database:
A training set is generated by database_reader.py:

database_reader.py generates a training set from all the configurations in a database. Only works for monomers at the moment. Only works if there is a optimized geometry inside the database
```
python database_reader.py <settings file> <database name> <training set file>
```
settings file: a file ending in .ini containing all the settings needed to generate a training set.

database name: the name of the file the database is stored in. ".db" will be added to the end if the name does not already end in ".db".

training set file: the name of the file where the training set should be generated. Should end in ".xyz".
